{"version":3,"sources":["../../node_modules/@minecraft/math/src/general/clamp.ts","../../node_modules/@minecraft/math/src/vector3/coreHelpers.ts","../../node_modules/@minecraft/math/src/vector3/vectorWrapper.ts","../../node_modules/@minecraft/math/src/vector3/index.ts","../../node_modules/@minecraft/math/src/general/index.ts","../../node_modules/@minecraft/math/src/index.ts","../../scripts/main.ts","../../scripts/maintenance.ts","../../scripts/commands.ts","../../scripts/config.ts"],"sourcesContent":[null,null,null,null,null,null,"import {\n  world,\n  system,\n  ChatSendAfterEvent,\n  PlayerSpawnAfterEvent,\n  EntityInventoryComponent,\n  EntityDieAfterEvent,\n  Player,\n  EntityComponentTypes,\n  Entity,\n  Vector3,\n  BlockVolume,\n  BlockComponentTypes,\n  ItemStack,\n  EntityEquippableComponent,\n  EquipmentSlot,\n  EntitySpawnAfterEvent,\n  EntityInitializationCause,\n  WorldInitializeAfterEvent,\n  World,\n} from \"@minecraft/server\";\nimport { BP_VERSION, version_documentation } from \"./maintenance\";\nimport { processCustomCommands } from \"./commands\";\nimport { Vector3Utils } from \"@minecraft/math\";\nimport * as config from \"./config\";\nimport { WorldConfigs } from \"./config\";\n\ninterface StringVec3Dictionary {\n  [key: string]: Vector3;\n}\n\nconst groundedPositionMap: StringVec3Dictionary = {};\n\n// Setup Hooks\nsystem.run(mainLoop);\nworld.afterEvents.chatSend.subscribe(onPlayerChatSend);\nworld.afterEvents.playerSpawn.subscribe(onPlayerSpawn);\nworld.afterEvents.entityDie.subscribe(onEntityDie);\nworld.afterEvents.entitySpawn.subscribe(onEntitySpawn);\nworld.afterEvents.worldInitialize.subscribe(onWorldInitialize);\n\nfunction onWorldInitialize(eventData: WorldInitializeAfterEvent){\n  let wcScoreboard = world.scoreboard.getObjective(config.WORLD_CONFIG_SCOREBOARD);\n\n  // Initialize scoreboards if not present.\n  if (!wcScoreboard) {\n    wcScoreboard = world.scoreboard.addObjective(config.WORLD_CONFIG_SCOREBOARD, \"World-Configs\");\n    wcScoreboard.setScore(\"TP_ENABLE\", 1)\n    wcScoreboard.setScore(\"NETHER_ENEMY_SPAWN_INHIBIT_ENABLE\", 1)\n    wcScoreboard.setScore(\"NETHER_ENEMY_DEBUF_STRENGTH\", 0)\n    wcScoreboard.setScore(\"MOB_SPAWN_INHIBIT_RADIUS\", 50)\n    wcScoreboard.setScore(\"DEBUG_LOG\", 0)\n  } else {\n    for(let s of wcScoreboard.getScores()){\n      let n = s.participant.displayName\n      world.sendMessage('>>' + n)\n      if (n in WorldConfigs){\n        WorldConfigs[n] = s.score\n        world.sendMessage(`Successfully configured WorldConfigs ${n} to ${s.score}.`)\n      }\n    }\n  }\n\n}\n// Main Loop\nvar ticks = 1;\nfunction mainLoop() {\n  ticks = (ticks + 1) % 20;\n  if (ticks == 0) {\n    checkPlayersLastGroundedPosition();\n  }\n  system.run(mainLoop);\n}\n\n// Player Spawn Hook\nfunction onPlayerSpawn(eventData: PlayerSpawnAfterEvent) {\n  if (!eventData.initialSpawn) {\n    return;\n  }\n  eventData.player.sendMessage(`${eventData.player.name}, ${config.SERVER_NAME}에 접속한 것을 환영합니다!`);\n  eventData.player.sendMessage(\n    `현재시간은 ${world.getDay()}일 ${Math.floor(world.getTimeOfDay() / 1000)}시 ${Math.floor(\n      ((world.getTimeOfDay() % 1000) / 1000) * 60\n    )}분 입니다.`\n  );\n  let joinedString = world\n    .getAllPlayers()\n    .map((player) => player.name)\n    .join(\", \");\n  eventData.player.sendMessage(\"현재 접속자는 \" + joinedString + \"입니다.\");\n\n  let vcScoreboard = world.scoreboard.getObjective(config.VERSION_CHECK_SCOREBOARD);\n\n  // Initialize scoreboards if not present.\n  if (!vcScoreboard) {\n    vcScoreboard = world.scoreboard.addObjective(config.VERSION_CHECK_SCOREBOARD, \"Player-Versions\");\n  }\n\n  // Add player if not present.\n  let is_newbie = false;\n  let is_version_upgrade = false;\n  if (!vcScoreboard.hasParticipant(eventData.player)) {\n    is_newbie = true;\n    is_version_upgrade = true;\n  } else {\n    var s = vcScoreboard.getScore(eventData.player);\n    if (s != undefined && s != BP_VERSION) {\n      is_version_upgrade = true;\n    }\n  }\n  vcScoreboard.setScore(eventData.player, BP_VERSION);\n  if (is_version_upgrade) {\n    eventData.player.sendMessage(`====================================`);\n    eventData.player.sendMessage(`서버가 업데이트되었습니다. (-> ${BP_VERSION})`);\n    if (BP_VERSION in version_documentation) {\n      eventData.player.sendMessage(`추가 내용:`);\n      for (let message of version_documentation[BP_VERSION]) {\n        eventData.player.sendMessage((\"    \" + message) as string);\n      }\n    }\n  }\n  eventData.player.sendMessage(`서버 기능 설명: ${config.README_LINK}`)\n  eventData.player.sendMessage(`====================================`);\n}\n\nfunction onPlayerChatSend(eventData: ChatSendAfterEvent) {\n  let player = eventData.sender;\n  let messageComponents = eventData.message.split(\" \");\n  processCustomCommands(messageComponents, player);\n}\n\nfunction onEntityDie(eventData: EntityDieAfterEvent) {\n  let e = eventData.deadEntity;\n  if (e instanceof Player) {\n    let inventory = e.getComponent(EntityComponentTypes.Inventory) as EntityInventoryComponent;\n    let equipment = e.getComponent(EntityComponentTypes.Equippable) as EntityEquippableComponent;\n    let pos = undefined;\n    if (!world.gameRules.keepInventory) return;\n    if (inventory && equipment) {\n      // Find suitable void location in vertical area\n\n      if (!(e.id in groundedPositionMap)) {\n        e.sendMessage(\"서버 > 에러로 인해 아이템이 유지되었습니다. 관리자에게 문의해 주세요\");\n        return;\n      }\n      pos = {\n        x: groundedPositionMap[e.id].x,\n        y: groundedPositionMap[e.id].y,\n        z: groundedPositionMap[e.id].z,\n      } as Vector3;\n      console.log(pos.x, pos.y, pos.z);\n      e.dimension.setBlockType(pos, \"minecraft:chest\");\n\n      if (pos) {\n        console.log(1);\n        let chest = e.dimension.getBlock(pos);\n        let chestContainer = chest?.getComponent(BlockComponentTypes.Inventory)?.container;\n\n        // Success! Actual logic from now on\n        let size = inventory.container?.size;\n\n        if (chestContainer && size) {\n          console.log(2);\n          for (let slot of [\n            EquipmentSlot.Chest,\n            EquipmentSlot.Feet,\n            EquipmentSlot.Head,\n            EquipmentSlot.Legs,\n            EquipmentSlot.Mainhand,\n            EquipmentSlot.Offhand,\n          ]) {\n            let eq = equipment.getEquipment(slot);\n            if (eq) {\n              let success = chestContainer.addItem(eq);\n              if (success instanceof ItemStack) {\n                e.dimension.spawnItem(success, { x: pos.x, y: pos.y + 1, z: pos.z });\n              }\n            }\n            equipment.setEquipment(slot, undefined);\n          }\n\n          for (let i = 0; i < size; i++) {\n            let success = inventory.container?.transferItem(i, chestContainer);\n            if (success instanceof ItemStack) {\n              e.dimension.spawnItem(success, { x: pos.x, y: pos.y + 1, z: pos.z });\n            }\n          }\n\n          inventory.container?.clearAll();\n          let is = new ItemStack(\"minecraft:paper\", 1);\n          is.nameTag = `사망 위치: ${Math.floor(pos.x)}, ${Math.floor(pos.y)}, ${Math.floor(pos.z)}`;\n          inventory.container?.addItem(is);\n        }\n      }\n    }\n  }\n}\n\n\nfunction onEntitySpawn(eventData: EntitySpawnAfterEvent){\n  if (eventData.cause == EntityInitializationCause.Spawned){\n    if (eventData.entity.dimension.id == \"minecraft:nether\" && (config.NETHER_ENEMY_SPAWN_BLACKLIST.indexOf(eventData.entity.typeId) != -1)){\n      let hl = getHomeLocation()\n      if(hl){ \n        hl = Vector3Utils.scale(hl, 1/8);\n        let l = Vector3Utils.distance(eventData.entity.location, hl)\n        if(l < WorldConfigs.MOB_SPAWN_INHIBIT_RADIUS){\n          dlog(`(onEntitySpawn) Removing nether enemy ${eventData.entity.typeId} (distance ${l} @ ${Vector3Utils.toString(eventData.entity.location, {decimals: 1})})`)\n          eventData.entity.remove()\n        }\n      }\n    }\n  }\n}\n\n\nfunction getHomeLocation(): Vector3 | undefined{\n  let hlScoreboard = world.scoreboard.getObjective(config.HOME_LOCATION_SCOREBOARD);\n  if (!hlScoreboard) return undefined;\n\n  let px = hlScoreboard.getScore(\"x\");\n  let py = hlScoreboard.getScore(\"y\");\n  let pz = hlScoreboard.getScore(\"z\");\n  if (!px || !py || !pz) return undefined;\n  return {x: px, y: py, z: pz}\n}\n\nfunction checkPlayersLastGroundedPosition() {\n  for (let i of world.getAllPlayers()) {\n    if (i.isOnGround && !i.dimension.getBlock(i.getHeadLocation())?.isLiquid) {\n      try {\n        groundedPositionMap[i.id] = { x: i.location.x, y: i.location.y, z: i.location.z };\n      } catch (e) {\n        console.log(e);\n      }\n    }\n  }\n}\n\nfunction dlog(s : string){\n  if (WorldConfigs.DEBUG_LOG)\n    world.sendMessage(\"> (Server Debug): \" + s)\n}","// Globals\r\nexport const BP_VERSION = 4;\r\n\r\nexport const version_documentation = {\r\n  0 : [\"!tp <사용자 이름> -> 사용자에게 순간이동함.\"],\r\n  1 : [\"!home -> 집으로 tp\"],\r\n  2 : [\"이제 사망시 아이템이 죽은 위치의 상자로 이동됩니다. 단 아이템이 너무 많은 경우 그대로 떨어질 수 있습니다.\"],\r\n  3 : [\"용암에서 사망시 상자가 용암 아래에 생성되는 버그 수정\"],\r\n  4 : [\"네더 너프 (링크 확인)\"]\r\n}","import { Player, World, world } from \"@minecraft/server\";\r\nimport * as config from \"./config\";\r\nexport function processCustomCommands(messageComponents: string[], player: Player) {\r\n  if (messageComponents.length == 0) return;\r\n  switch (messageComponents[0]) {\r\n    case \"!tp\": {\r\n      if (messageComponents.length != 2) {\r\n        player.sendMessage(`tp > 사용법 '!tp <playername>'`);\r\n        return;\r\n      }\r\n      for (let target of world.getAllPlayers()) {\r\n        if (target.name == messageComponents[1]) {\r\n          let tpSuccess = player.tryTeleport(target.location, { dimension: target.dimension });\r\n          if (tpSuccess) {\r\n            player.sendMessage(`tp > ${target.name}에게 소환되었습니다.`);\r\n            player.resetLevel();\r\n          } else {\r\n            player.sendMessage(`tp > ${target.name}는 현재 소환할 수 있는 위치가 아닙니다.`);\r\n          }\r\n          return;\r\n        }\r\n      }\r\n      player.sendMessage(`tp > 이름 ${messageComponents[1]}은 유효하지 않습니다.`);\r\n      sendPlayerListMessage(player);\r\n      return;\r\n    }\r\n\r\n    case \"!sethome\": {\r\n      if (player.dimension.id != \"minecraft:overworld\") {\r\n        player.sendMessage(`sethome > 홈 설정은 오버월드에서만 가능합니다.`);\r\n        return;\r\n      }\r\n      if (!player.isOp){\r\n        player.sendMessage(`sethome > 홈 설정은 Operator aaaa권한을 가진 사용자만 가능합니다.`);\r\n      }\r\n      let hlScoreboard = world.scoreboard.getObjective(config.HOME_LOCATION_SCOREBOARD);\r\n\r\n      // Initialize scoreboards if not present.\r\n      if (!hlScoreboard) {\r\n        hlScoreboard = world.scoreboard.addObjective(config.HOME_LOCATION_SCOREBOARD, \"Home-Location\");\r\n      }\r\n\r\n      hlScoreboard.setScore(\"x\", player.location.x);\r\n      hlScoreboard.setScore(\"y\", player.location.y);\r\n      hlScoreboard.setScore(\"z\", player.location.z);\r\n\r\n      player.sendMessage(`sethome > 성공!`);\r\n      return;\r\n    }\r\n\r\n    case \"!home\": {\r\n      let hlScoreboard = world.scoreboard.getObjective(config.HOME_LOCATION_SCOREBOARD);\r\n\r\n      if (!hlScoreboard) {\r\n        player.sendMessage(`home > 집 위치가 설정되지 않았습니다.`);\r\n        return;\r\n      }\r\n      let px = hlScoreboard.getScore(\"x\");\r\n      let py = hlScoreboard.getScore(\"y\");\r\n      let pz = hlScoreboard.getScore(\"z\");\r\n      if (px != undefined && py != undefined && pz != undefined) {\r\n        let tpSuccess = player.tryTeleport(\r\n          { x: px, y: py, z: pz },\r\n          { dimension: world.getDimension(\"minecraft:overworld\") }\r\n        );\r\n        if (tpSuccess) {\r\n          player.resetLevel();\r\n          player.sendMessage(`home > 집으로 소환되었습니다.`);\r\n        } else {\r\n          player.sendMessage(`home > 집은 현재 소환할 수 있는 위치가 아닙니다.`);\r\n        }\r\n        return;\r\n      }\r\n\r\n      player.sendMessage(`home > 오류`);\r\n      return;\r\n    }\r\n  }\r\n}\r\n\r\nfunction sendPlayerListMessage(player: Player) {\r\n  player.sendMessage(\"접속중인 사용자:\");\r\n  world.getAllPlayers().forEach((target) => {\r\n    player.sendMessage(\"    \" + target.name);\r\n  });\r\n}\r\n","export const SERVER_NAME = \"서버\";\r\n\r\nexport const VERSION_CHECK_SCOREBOARD = \"VERSION_CHECK_SCOREBOARD\";\r\nexport const HOME_LOCATION_SCOREBOARD = \"HOME_LOCATION_SCOREBOARD\";\r\nexport const WORLD_CONFIG_SCOREBOARD  = \"WORLD_CONFIG_SCOREBOARD\" ;\r\nexport const UUID = \"90430917-0e61-48c1-800e-babda0b3bd36\";\r\nexport const README_LINK = \"https://bit.ly/3wimntH\"\r\nexport const WorldConfigs : {[key: string]: number} = {\r\n  TP_ENABLE: 1,\r\n  NETHER_ENEMY_SPAWN_INHIBIT_ENABLE: 1,\r\n  NETHER_ENEMY_DEBUF_STRENGTH: 0,\r\n  MOB_SPAWN_INHIBIT_RADIUS: 100,\r\n  DEBUG_LOG: 0\r\n}\r\nexport const NETHER_ENEMY_SPAWN_BLACKLIST = [\r\n  'minecraft:skeleton',\r\n  'minecraft:ghast'\r\n]"],"mappings":"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","names":["Vector3Utils","world","Player","world","Player"],"file":"../scripts/main.js"}